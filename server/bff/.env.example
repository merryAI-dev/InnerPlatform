# BFF runtime
BFF_HOST=0.0.0.0
BFF_PORT=8080
BFF_ALLOWED_ORIGINS=http://127.0.0.1:5173,http://localhost:5173
# headers | firebase_optional | firebase_required
BFF_AUTH_MODE=headers
# Secret for internal worker endpoints (/api/internal/workers/*).
# If BFF_WORKER_SECRET is empty, CRON_SECRET will be used when available.
BFF_WORKER_SECRET=
# Firebase Admin credentials (pick one)
# FIREBASE_SERVICE_ACCOUNT_JSON={"project_id":"...","client_email":"...","private_key":"-----BEGIN PRIVATE KEY-----\\n...\\n-----END PRIVATE KEY-----\\n"}
# FIREBASE_SERVICE_ACCOUNT_BASE64=

# Firebase project resolution
FIREBASE_PROJECT_ID=mysc-bmp-14173451

# Optional: force Firestore emulator for local server
# FIRESTORE_EMULATOR_HOST=127.0.0.1:8080

# Optional cleanup tuning
BFF_IDEMPOTENCY_CLEANUP_BATCH=200
BFF_IDEMPOTENCY_CLEANUP_DRY_RUN=false

# Outbox worker tuning
BFF_OUTBOX_BATCH=50
BFF_OUTBOX_MAX_ATTEMPTS=8
BFF_OUTBOX_LOOP=false
BFF_OUTBOX_INTERVAL_MS=5000

# Work queue worker tuning (projection rebuild)
BFF_WORK_QUEUE_BATCH=100
BFF_WORK_QUEUE_MAX_ATTEMPTS=6
BFF_WORK_QUEUE_LOOP=false
BFF_WORK_QUEUE_INTERVAL_MS=3000

# PII protection
# PII_MODE: off | local | kms | auto
PII_MODE=off
# Local keyring format: keyId:base64key32,keyId2:base64key32
# PII_LOCAL_KEYRING=v1:BASE64_32B_KEY
# PII_LOCAL_CURRENT_KEY_ID=v1
# KMS key format (comma-separated key resource names)
# PII_KMS_KEYS=projects/<p>/locations/<loc>/keyRings/<r>/cryptoKeys/<k>
# PII_KMS_CURRENT_KEY=projects/<p>/locations/<loc>/keyRings/<r>/cryptoKeys/<k>

# RBAC policy file override
# RBAC_POLICY_PATH=policies/rbac-policy.json
